<div class="container mt-5">
  <div class="card">
    <div class="card-body">
      <h2 class="card-title text-center text-primary">Add New User</h2>
      <form [formGroup]="addUserForm" (ngSubmit)="onSubmit()">
        <div class="row mb-3">
          <div class="col">
            <label for="fname" class="form-label">First Name</label>
            <input type="text" id="fname" formControlName="fname" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['fname'].errors }">
            <div *ngIf="submitted && f['fname'].errors" class="invalid-feedback">
              <div *ngIf="f['fname'].errors['required']">First Name is required</div>
              <div *ngIf="f['fname'].errors['pattern']">First Name must be all characters</div>
              <div *ngIf="f['fname'].errors['minlength']">First Name should be at least 3 characters</div>
              <div *ngIf="f['fname'].errors['maxlength']">First Name shouldn't exceed 100 characters</div>
            </div>
          </div>
          <div class="col">
            <label for="lname" class="form-label">Last Name</label>
            <input type="text" id="lname" formControlName="lname" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['lname'].errors }">
            <div *ngIf="submitted && f['lname'].errors" class="invalid-feedback">
              <div *ngIf="f['lname'].errors['required']">Last Name is required</div>
              <div *ngIf="f['lname'].errors['pattern']">Last Name must be all characters</div>
              <div *ngIf="f['lname'].errors['minlength']">Last Name should be at least 3 characters</div>
              <div *ngIf="f['lname'].errors['maxlength']">Last Name shouldn't exceed 100 characters</div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="email" class="form-label">Email</label>
            <input type="email" id="email" formControlName="email" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['email'].errors }">
            <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
              <div *ngIf="f['email'].errors['required']">Email is required</div>
              <div *ngIf="f['email'].errors['email']">Invalid email format</div>
            </div>
          </div>
          <div class="col">
            <label for="phone" class="form-label">Phone</label>
            <input type="text" id="phone" formControlName="phone" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['phone'].errors }">
            <div *ngIf="submitted && f['phone'].errors" class="invalid-feedback">
              <div *ngIf="f['phone'].errors['required']">Phone is required</div>
              <div *ngIf="f['phone'].errors['minlength']">Phone should be at least 10 numbers</div>
              <div *ngIf="f['phone'].errors['maxlength']">Phone can't exceed 15 numbers</div>
              <div *ngIf="f['phone'].errors['pattern']">Phone must contain only numbers</div>

            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="address" class="form-label">Address</label>
            <input type="text" id="address" formControlName="address" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['address'].errors }">
            <div *ngIf="submitted && f['address'].errors" class="invalid-feedback">
              <div *ngIf="f['address'].errors['required']">Address is required</div>
              <div *ngIf="f['address'].errors['minlength']">Address should be at least 8 characters</div>
              <div *ngIf="f['address'].errors['maxlength']">Address can't exceed 255 characters</div>
              <div *ngIf="f['address'].errors['pattern']">Address must contain characters</div>
            </div>
          </div>
          <div class="col">
            <label for="age" class="form-label">Age</label>
            <input type="number" id="age" formControlName="age" min="18" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['age'].errors }">
            <div *ngIf="submitted && f['age'].errors" class="invalid-feedback">
              <div *ngIf="f['age'].errors['required']">Age is required</div>
              <div *ngIf="f['age'].errors['min']">Age must be at least 18</div>
              <div *ngIf="f['age'].errors['max']">Age can't exceed 120</div>
              <div *ngIf="f['age'].errors['pattern']">Age must be a number</div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="password" class="form-label">Password</label>
            <input type="password" id="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['password'].errors }">
            <div *ngIf="submitted && f['password'].errors" class="invalid-feedback">
              <div *ngIf="f['password'].errors['required']">Password is required</div>
              <div *ngIf="f['password'].errors['minlength']">Password must be at least 8 characters long</div>
            </div>
          </div>
          <div class="col">
            <label for="password_confirmation" class="form-label">Confirm Password</label>
            <input type="password" id="password_confirmation" formControlName="password_confirmation" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['password_confirmation'].errors }">
            <div *ngIf="submitted && f['password_confirmation'].errors" class="invalid-feedback">
              <div *ngIf="f['password_confirmation'].errors['required']">Confirm Password is required</div>
              <div *ngIf="f['password_confirmation'].errors['passwordMismatch']">Passwords do not match</div>
            </div>
          </div>
        </div>
        <div class="text-center">
          <button type="submit" class="btn btn-primary">Add User</button>
          <a  class="btn btn-danger ms-2" routerLink="/admin-dashboard/users">Cancel</a>
        </div>

        <div *ngIf="success" class="alert alert-success mt-3">User added successfully!</div>
        <div *ngIf="errorMessage" class="alert alert-danger mt-3">
          <p>{{ errorMessage }}</p>
        </div>

      </form>
    </div>
  </div>
</div>
